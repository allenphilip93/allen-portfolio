<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Hosting your webapp on Azure free tier</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel='icon' href='../images/favicon.ico' type='image/x-icon'/>
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,700" rel="stylesheet">

    <link rel="stylesheet" href="../css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="../css/animate.css">
    
    <link rel="stylesheet" href="../css/owl.carousel.min.css">
    <link rel="stylesheet" href="../css/owl.theme.default.min.css">
    <link rel="stylesheet" href="../css/magnific-popup.css">

    <link rel="stylesheet" href="../css/aos.css">

    <link rel="stylesheet" href="../css/ionicons.min.css">

    <link rel="stylesheet" href="../css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="../css/jquery.timepicker.css">

    
    <link rel="stylesheet" href="../css/flaticon.css">
    <link rel="stylesheet" href="../css/icomoon.css">
    <link rel="stylesheet" href="../css/style.css">

    <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/androidstudio.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body>

    <div class="KW_progressContainer">
      <div class="KW_progressBar">

      </div>
    </div>
    <div class="page">
    <nav id="colorlib-main-nav" role="navigation">
      <a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle active"><i></i></a>
      <div class="js-fullheight colorlib-table">
      	<div class="img" style="background-image: url(images/author-2.jpg);"></div>
        <div class="colorlib-table-cell js-fullheight">
          <div class="row no-gutters">
            <div class="col-md-12 text-center">
              <h1 class="mb-4"><a href="../index.html" class="logo">Allen Philip J</a></h1>
              <ul>
                <li><a href="../index.html"><span><small>01</small>Home</span></a></li>
                <li><a href="../about.html"><span><small>02</small>Resume</span></a></li>
                <li><a href="../services.html"><span><small>03</small>Services</span></a></li>
                <li><a href="../portfolio.html"><span><small>04</small>Portfolio</span></a></li>
                <li class="active"><a href="../blog.html"><span><small>05</small>Blog</span></a></li>
                <li><a href="../contact.html"><span><small>06</small>Contact</span></a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>
    
    <div id="colorlib-page">
      <header>
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <div class="colorlib-navbar-brand">
                <a class="colorlib-logo" href="../blog.html"><span class="logo-img" style="background-image: url(images/person_1.jpg);"></span>Allen Philip J</a>
              </div>
              <a href="#" class="js-colorlib-nav-toggle colorlib-nav-toggle"><i></i></a>
            </div>
          </div>
        </div>
      </header>

      <section class="ftco-section">
        <div class="container mt-5">
        	<div class="row justify-content-center mb-5 pb-5">
            <div class="col-md-7 text-center heading-section ftco-animate">
              <span>Blog</span>
              <h2>Hosting your webapp on Azure free tier</h2>
            </div>
          </div>
          <div class="row d-flex justify-content-center">
            <div class="col-md-8">
              <h2 class="mb-3">#1. Why do I need this?</h2>
              <p>Azure free tier gives a quick and simple way to setup quickly a website for yourself. This could serve as your portfolio website or your blog website or a podcast website etc.</p>
              <p>This integrates right back into your GitHub account which allows us to create actions which will automatically re-deploy the webapp on commit to say the master branch.</p>
              
              <h2 class="mb-3 mt-5">#2. Prerequisites</h2>
              <p>Ensure that you have a Github repository with a basic NodeJS webapp. For more information, check out <a href="blog-single-1.html">Create a website using NodeJS in 5 mins</a>.</p>

              <h2 class="mb-3 mt-5">#3. Creating an Azure free trial account</h2>
              <p>Create an account on Azure at <a href="https://portal.azure.com/#home">https://portal.azure.com/#home</a>.</p>
              <p>Once you create an account and login you'll see the following screen.</p>
              <p>
                <img src="../images/blog2a.png" alt="" class="img-fluid">
              </p>
              <p>Click on "Start a free trial with Azure", follow the steps and activate the Azure free trial. You will be asked for credit card information but it will not deduct any amount unless you ugrade to a paid account.</p>

              <h2 class="mb-3">#4. Creating the resource group and app service</h2>
              <p>After you enable the free trial, come to the home page <a href="https://portal.azure.com/#home">https://portal.azure.com/#home</a> and click on create "App Serivces"</p>
              <p>
                <img src="../images/blog2b.png" alt="" class="img-fluid">
              </p>
              <p>Select the "Free Trial" subscription and click on "Create new" for the resource group. A resource group is a logical way to group all assets that belong together.</p>
              <p>In our example we are creating a portfolio website. We will create a resource group "portfolio" and we will create our webapp, databases, monitoring tool, storage accounts etc related to my portfolio services within "portfolio" resource group.</p>
              <p>
                <img src="../images/blog2c.png" alt="" class="img-fluid">
              </p>
              <p>Once the resource group is created, select the runtime stack as Node 12 LTS, Publish as "Code", region as "West Europe" (since free tier is limited to few regions only).</p>
              <p>App Service plan determines the memory, amount of compute allowed, pricing etc for the webapp. Click on "Create new" under App Service Plan and make sure to select <b>F1 tier under Dev/Test</b>.</p>
              <p>
                <img src="../images/blog2d.png" alt="" class="img-fluid">
              </p> 
              <p>Click on "Create + Review" and double check the configuration again.</p>
              <p>
                <img src="../images/blog2e.png" alt="" class="img-fluid">
              </p> 
              <p>Once the deployment is complete, you should be able to see two resources under your resource group, one for the webapp and one for the app service plan as follows.</p>
              <p>
                <img src="../images/blog2f.png" alt="" class="img-fluid">
              </p>

              <h2 class="mb-3">#5. Setting up CI/CD pipeline with Github</h2>
              <p>Select your app service and click on "Deployment Center" on the side panel.</p>
              <p>
                <img src="../images/blog2g.png" alt="" class="img-fluid">
              </p>
              <p>Select "GitHub" for a continuous integration with a Github repo. It will currently say "Unauthorized", so select it and click on "Authorize" at the bottom.</p>
              <p>Login in to your Github account from the pop-up and authorize Azure App Service for Github. Click on "Continue" once complete.</p>
              <p>
                <img src="../images/blog2h.png" alt="" class="img-fluid">
              </p>
              <p>Select "Github actions" as the build provider and click on "Continue".</p>
              <p>
                <img src="../images/blog2i.png" alt="" class="img-fluid">
              </p>
              <p>Select the organization, repo and branch. If it doesn't show up check Github -> Settings -> Applications -> Authorized OAuth Apps and check if Azure App Service is granted.</p>
              <p>
                <img src="../images/blog2j.png" alt="" class="img-fluid">
              </p>
              <p>
                <img src="../images/blog2k.png" alt="" class="img-fluid">
              </p>
              <p>Review the configuration and click on "Finish".</p>
              <p>Open Github and create/open <b>".github/workflows/master_{app_name}.yml"</b>. Ensure that the workflow file is as follows.</p>
              <pre><code class="yml hljs">name: Build and deploy Node.js app to Azure Web App - allen-portfolio

on:
  push:
    branches:
      - master

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@master

    - name: Set up Node.js version
      uses: actions/setup-node@v1
      with:
        node-version: '12.x'

    - name: npm install, build, and test
      run: |
        npm install
        npm run build --if-present
    - name: 'Deploy to Azure Web App'
      uses: azure/webapps-deploy@v1
      with:
        app-name: 'allenphilip-portfolio'
        publish-profile: ${{ secrets.AzureAppService_PublishProfile }}
        package: .</code></pre>
              <p>Secrets can be create from Github Repo -> Settings -> Secrets. Create a secret for publishProfile if it's not present.</p>
              <p>
                <img src="../images/blog2l.png" alt="" class="img-fluid">
              </p>
              <p>You can download the publishProfile for the app service from the Azure portal and copy-paste the contents of the file into the secret.</p>
              <p>
                <img src="../images/blog2m.png" alt="" class="img-fluid">
              </p>
              <p>Check the status of the Github action.</p>
              <p>
                <img src="../images/blog2n.png" alt="" class="img-fluid">
              </p>
              <p>Open the webapp from the url in app service Overview.</p>
              <p>
                <img src="../images/blog2o.png" alt="" class="img-fluid">
              </p>
              <p>
                <img src="../images/blog2p.png" alt="" class="img-fluid">
              </p>

              <div class="tag-widget post-tag-container mb-5 mt-5">
                <div class="tagcloud">
                  <a href="#" class="tag-cloud-link">Tech</a>
                  <a href="#" class="tag-cloud-link">Cloud</a>
                  <a href="#" class="tag-cloud-link">Azure</a>
                </div>
              </div>
              
              <div class="about-author d-flex pt-5">
                <div class="bio align-self-md-center mr-4">
                  <img src="../images/person_1.jpg" alt="Image placeholder" class="img-fluid mb-4">
                </div>
                <div class="desc align-self-md-center">
                  <h3>About The Author</h3>
                  <p>Allen Philip is a passionate software engineer with over 6 years of experience dunking coffee, starring at screen, pulling out hair strands and changing the world one commit at a time.</p>
                </div>
              </div>

            </div> <!-- .col-md-8 -->

          </div>
        </div>
      </section>
      
      <footer class="ftco-footer ftco-bg-dark ftco-section">
        <div class="container">
          <div class="row mb-5 justify-content-center">
            <div class="col-md-5 text-center">
              <div class="ftco-footer-widget mb-5">
                <ul class="ftco-footer-social list-unstyled">
                  <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
                  <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
                  <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
                </ul>
              </div>
              <div class="ftco-footer-widget">
                <h2 class="mb-3">Contact Us</h2>
                <p class="h3 email"><a href="#">info@email.com</a></p>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12 text-center">

              <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
      Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true" style="color: red;"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
      <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
            </div>
          </div>
        </div>
      </footer>

      <!-- loader -->
      <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>

      </div>

    </div>


    <script src="../js/jquery.min.js"></script>
    <script src="../js/jquery-migrate-3.0.1.min.js"></script>
    <script src="../js/popper.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/jquery.easing.1.3.js"></script>
    <script src="../js/jquery.waypoints.min.js"></script>
    <script src="../js/jquery.stellar.min.js"></script>
    <script src="../js/owl.carousel.min.js"></script>
    <script src="../js/jquery.magnific-popup.min.js"></script>
    <script src="../js/aos.js"></script>
    <script src="../js/jquery.animateNumber.min.js"></script>
    <script src="../js/scrollax.min.js"></script>
    <script src="../js/bootstrap-datepicker.js"></script>
    <script src="../js/jquery.timepicker.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
    <script src="../js/google-map.js"></script>
    <script src="../js/main.js"></script>
    
  </body>
</html>